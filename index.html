<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="assets/style.css?t=a44c9e9d">
    <script src="assets/script.js?t=820b7ffa"></script>
    <title>hapi-decorators</title>
    <meta name="viewport" content="width=device-width">
  </head>
  <body class="-menu-visible">
    <div class="doc-layout">
      <div class="toggle menu-toggle js-menu-toggle"></div>
      <div class="body page-index">
        <div class="header-nav">
          <div class="right"><a href="https://github.com/knownasilya/hapi-decorators" data-title="knownasilya/hapi-decorators" class="iconlink">
              <!-- span.title Open in GitHub--><span class="icon -github"></span></a>
          </div>
        </div>
        <div class="markdown-body"><h1 id="hapi-decorators">hapi-decorators</h1>
<p>Decorators for HapiJS routes.
Heavily inspired and borrowed from <a href="https://github.com/stewartml/express-decorators">https://github.com/stewartml/express-decorators</a></p>
<p>Great to mix with <a href="https://github.com/jayphelps/core-decorators.js">https://github.com/jayphelps/core-decorators.js</a></p>
<p><a href="http://badge.fury.io/js/hapi-decorators"><img src="https://badge.fury.io/js/hapi-decorators.svg" alt="npm version"></a>
<a href="https://travis-ci.org/knownasilya/hapi-decorators"><img src="https://travis-ci.org/knownasilya/hapi-decorators.svg" alt="Build Status"></a>
<a href="https://coveralls.io/github/knownasilya/hapi-decorators?branch=master"><img src="https://coveralls.io/repos/knownasilya/hapi-decorators/badge.svg?branch=master&amp;service=github" alt="Coverage Status"></a></p>
<h2 id="usage">Usage</h2>
<pre><code class="lang-no-highlight">npm install --save hapi-decorators
</code></pre>
<pre><code class="lang-js"><span class="pl-c">/*
 * index.js
 *
 * Hapi initialization not shown, but `server` is the assumed
 * instance;
 */</span>
<span class="pl-k">import</span> {
  get,
  controller
} <span class="pl-k">from</span> <span class="pl-s">&apos;hapi-decorators&apos;</span>

@controller(<span class="pl-s">&apos;/hello&apos;</span>)
public <span class="hljs-class"><span class="pl-k">class</span> <span class="pl-ent">TestController</span> </span>{
  <span class="pl-k">constructor</span>(target) {
    <span class="pl-k">this</span>.target = target
  }

  @get(<span class="pl-s">&apos;/world&apos;</span>)
  sayHello(request, reply) {
    reply({ message: <span class="pl-s">`hello, <span class="hljs-subst">${this.target}</span>`</span> })
  }
}

<span class="pl-k">let</span> test = <span class="pl-k">new</span> TestController(<span class="pl-s">&apos;world&apos;</span>)

server.routes(test.routes())
</code></pre>
<h3 id="setup-babel">Setup Babel</h3>
<p>Run the above script with the following command, after installing <a href="https://www.npmjs.com/package/babel">babel</a>.</p>
<pre><code class="lang-no-highlight">babel-node --optional es7.decorators,es7.objectRestSpread index.js
</code></pre>
<p>Note: Decorators are currently unsupported in Babel 6. To work around that <a href="https://phabricator.babeljs.io/T2645">issue</a>
use the <a href="https://www.npmjs.com/package/babel-plugin-transform-decorators-legacy">transform-decorators-legacy</a> plugin. See this <a href="http://technologyadvice.github.io/es7-decorators-babel6">post</a> for detailed instructions.</p>
<h2 id="decorators">Decorators</h2>
<h3 id="@controller(basepath)"><code>@controller(basePath)</code></h3>
<p><strong>REQUIRED</strong> This decorator is required at the class level, since it processes the other decorators, and adds
the <code>instance.routes()</code> function, which returns the routes that can be used with Hapi, e.g. <code>server.routes(users.routes())</code>.</p>
<h3 id="@route(method-path)"><code>@route(method, path)</code></h3>
<p>This decorator should be attached to a method of a class, e.g.</p>
<pre><code class="lang-js">@controller(<span class="pl-s">&apos;/users&apos;</span>)
<span class="hljs-class"><span class="pl-k">class</span> <span class="pl-ent">Users</span> </span>{
  @route(<span class="pl-s">&apos;post&apos;</span>, <span class="pl-s">&apos;/&apos;</span>)
  newUser(request, reply) {
    reply([])
  }
}
</code></pre>
<p><strong>Helper Decorators</strong></p>
<ul>
<li><code>@get(path)</code></li>
<li><code>@post(path)</code></li>
<li><code>@put(path)</code></li>
<li><code>@patch(path)</code></li>
<li><code>@delete(path)</code></li>
<li><code>@all(path)</code></li>
</ul>
<p>These are shortcuts for <code>@route(method, path)</code> where <code>@get(&apos;/revoke&apos;)</code> would be <code>@route(&apos;get&apos;, &apos;/revoke&apos;)</code>.</p>
<h3 id="@config(config)"><code>@config(config)</code></h3>
<p>Overall configuration setting if none of the other decorators are sufficient.</p>
<h3 id="@validate(validateconfig)"><code>@validate(validateConfig)</code></h3>
<p>Add a validation object for the different types, except for the response.
<code>config</code> is an object, with keys for the different types, e.g. <code>payload</code>.</p>
<h3 id="@cache(cacheconfig)"><code>@cache(cacheConfig)</code></h3>
<p>Cache settings for the route config object.</p>

        </div>
      </div>
      <div class="menu toc-menu">
        <li class="menu-item -level-0 -parent">
          <ul class="submenu">
            <li class="menu-item -level-1"><a href="index.html" class="link title -active link-index">hapi-decorators</a>
            </li>
            <li class="menu-item -level-1 -parent"><a href="#usage" class="link title link-usage">Usage</a>
              <ul class="submenu">
                <li class="menu-item -level-2"><a href="#setup-babel" class="link title link-setup-babel">Setup Babel</a>
                </li>
              </ul>
            </li>
            <li class="menu-item -level-1 -parent"><a href="#decorators" class="link title link-decorators">Decorators</a>
              <ul class="submenu">
                <li class="menu-item -level-2"><a href="#@controller(basepath)" class="link title link-@controller(basepath)">`@controller(basePath)`</a>
                </li>
                <li class="menu-item -level-2"><a href="#@route(method-path)" class="link title link-@route(method-path)">`@route(method, path)`</a>
                </li>
                <li class="menu-item -level-2"><a href="#@config(config)" class="link title link-@config(config)">`@config(config)`</a>
                </li>
                <li class="menu-item -level-2"><a href="#@validate(validateconfig)" class="link title link-@validate(validateconfig)">`@validate(validateConfig)`</a>
                </li>
                <li class="menu-item -level-2"><a href="#@cache(cacheconfig)" class="link title link-@cache(cacheconfig)">`@cache(cacheConfig)`</a>
                </li>
              </ul>
            </li>
          </ul>
        </li>
      </div>
    </div>
  </body>
</html>